Content-type: text/html

<!DOCTYPE html>
<meta charset="UTF-8">


<div style="position: absolute;right: 160px;top: 535px;"> 
<img src="bargraph.png" width="550" height="500" alt="Bargraph showing sales of Soda-Pop by day.">
</div>

<title>Calvin CS Pop Machine</title>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23444084-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    <script src="js/rgraph/RGraph.common.core.js" type="text/javascript"></script>
    <script src="js/rgraph/RGraph.common.annotate.js" type="text/javascript"></script>
    <script src="js/rgraph/RGraph.common.context.js" type="text/javascript"></script>

    <script src="js/rgraph/RGraph.common.tooltips.js" type="text/javascript"></script>
    <script src="js/rgraph/RGraph.common.resizing.js" type="text/javascript"></script>
    <script src="js/rgraph/RGraph.bar.js" type="text/javascript"></script>
    <script src="js/rgraph/RGraph.line.js" type="text/javascript"></script>

    <script type="text/javascript">
    window.onload = function() { 
var hourData = [17,31,71,15,9,7,7,0,0,0,0,0,1,5,9,21,14,48,46,42,60,35,24,29];
var dayData = [65,71,79,74,121,68,13];
var monthData = [0,15,56,50,52,57,74,68,65,54,0,0,];
var yearDayData = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,0,0,6,6,0,4,0,0,7,6,0,1,1,0,0,2,1,2,3,2,0,1,2,1,1,1,3,1,0,1,3,0,1,0,1,1,2,0,5,3,0,6,2,3,2,1,3,1,1,0,2,2,3,1,0,0,0,2,2,0,3,3,1,0,0,2,3,3,2,0,0,1,2,4,3,5,1,0,3,5,2,3,0,0,0,3,0,3,2,5,0,0,0,0,1,3,0,0,0,3,1,1,2,0,4,2,1,0,6,2,2,2,0,2,8,1,2,0,1,0,1,3,4,5,4,4,0,0,1,2,2,3,4,0,2,5,6,7,4,2,0,1,0,0,1,4,1,3,1,2,3,3,6,1,2,7,2,4,3,0,0,0,0,5,3,0,1,4,0,3,3,1,5,5,4,1,2,1,3,1,2,0,0,3,3,2,0,2,5,1,2,1,3,2,2,2,0,5,0,1,2,4,6,0,1,1,3,2,3,1,0,1,2,4,2,7,1,0,2,0,0,0,2,0,0,0,1,1,3,44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];
var todayHourData = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];
var tempData = [1.11111111111,2.77777777778,2.77777777778,2.22222222222,2.22222222222,2.77777777778,2.77777777778,1.66666666667,2.22222222222,3.33333333333,1.66666666667,2.22222222222,2.77777777778,1.11111111111,1.66666666667,2.77777777778,1.66666666667,1.11111111111,2.22222222222,2.77777777778,];

         var monthBar = new RGraph.Bar('monthChart', monthData);
         monthBar.Set('chart.labels', ['Jan.', 'Feb.', 
		'Mar.', 'Apr.', 'May', 'June', 'July', 'Aug.', 
		'Sept.', 'Oct.', 'Nov.', 'Dec.'])
         monthBar.Set('chart.title', 'Sales by Month');
         monthBar.Set('chart.colors', ["#3e718a"]);
         monthBar.Draw();

         /* Strictly speaking, we're a day off on non-leap-years.
            Nobody will notice. */
         var DOYLabels = [];
         DOYLabels[0] = "Jan.";
         DOYLabels[1+31] = "Feb.";
         DOYLabels[1+31+29] = "Mar.";
         DOYLabels[1+31+29+31] = "Apr.";
         DOYLabels[1+31+29+31+30] = "May";
         DOYLabels[1+31+29+31+30+31] = "June";
         DOYLabels[1+31+29+31+30+31+30] = "July";
         DOYLabels[1+31+29+31+39+31+30+31] = "Aug.";
         DOYLabels[1+31+29+31+39+31+30+31+31] = "Sept.";
         DOYLabels[1+31+29+31+39+31+30+31+31+30] = "Oct.";
         DOYLabels[1+31+29+31+39+31+30+31+31+30+31] = "Nov.";
         DOYLabels[1+31+29+31+39+31+30+31+31+30+31+30] = "Dec.";

         /* This ensures there are 366 'items' in the array. */
         DOYLabels[366] = ""; 

         var DOYLine = new RGraph.Line('doyChart', yearDayData);
         DOYLine.Set('chart.labels', DOYLabels);
         DOYLine.Set('chart.title', 'Sales by Day of Year');
         DOYLine.Set('chart.colors', ["#3e718a"]);
         DOYLine.Draw();

         var dayBar = new RGraph.Bar('dayChart', dayData);
         dayBar.Set('chart.labels', ['Mon.', 'Tues.', 'Wed.', 
		'Thurs.', 'Fri.', 'Sat.', 'Sun.'])
         dayBar.Set('chart.title', 'Sales by Weekday');
         dayBar.Set('chart.colors', ["#3e718a"]);
         dayBar.Draw();

         var hours = [];
         var isPM = false;
         for (var i = 12; i < 36; i++) {
            if ((i % 12) == 0) {
                if (isPM)
                   hours.push("PM");
                else {
                   hours.push("AM");
                   isPM = !isPM;
                }
            }
            else hours.push(i % 12);
         }

         var hourBar = new RGraph.Bar('hourChart', hourData);
         hourBar.Set('chart.labels', hours);
         hourBar.Set('chart.title', 'Sales by Hour of Day');
         hourBar.Set('chart.colors', ["#3e718a"]);
         hourBar.Draw();

         tempData.reverse()
         var tempLine = new RGraph.Line('tempChart', tempData);
         tempLine.Set('chart.title', 'Pop temperature trend (degrees C)');
         tempLine.Set('chart.colors', ["#3e718a"]);
         tempLine.Set('chart.background.grid.vlines', false);
         tempLine.Draw();

         var currentHour = (new Date()).getHours();
         var todayHourLabels = hours;

         /* We need to cycle the todayHourData array by the current hour
            in order to show the graph as receding into the past. */
         for (var i = 0; i < currentHour; i++) {
            todayHourData.push(todayHourData.shift());
            todayHourLabels.push(todayHourLabels.shift());
         }

         var todayBar = new RGraph.Bar('todayChart', todayHourData);
         todayBar.Set('chart.title', 'Sales in the past 24 hours');
         todayBar.Set('chart.colors', ["#3e718a"]);
         todayBar.Set('chart.labels', todayHourLabels);
         todayBar.Draw();
      }
</script>
<link rel='stylesheet' href='popmachine.css' media='screen'/>

<p style='text-align: center'> 
<img class=soda-poplogo src="soda-poplogo.svg" alt="Soda can next to the words Soda-Pop.">
</p>


<h1> Calvin Computer Science Pop Machine </h1>

<table class='mainTable'>
<tr><td style='vertical-align: top'>
<h3>Pop vended</h3>
<table class="infoTable">
<tr><th>Type</th>
<th>Price</th>
<th>Stock</th>
<th>Today</th>
<th>Total</th>
</tr>
<tr>

<td class='name'>
Coke
</td>
<td> $1.25 </td>
<td class='empty'>
Sold Out
</td>
<td> 193 </td>
</tr>
<tr>

<td class='name'>
Diet Coke
</td>
<td> $1.25 </td>
<td>
15
</td>
<td> 42 </td>
</tr>
<tr>

<td class='name'>
24oz Mountain Dew
</td>
<td> $1.25 </td>
<td class='empty'>
Sold Out
</td>
<td> 41 </td>
</tr>
<tr>

<td class='name'>
Caffeine-free Diet Coke
</td>
<td> $1.25 </td>
<td>
2
</td>
<td> 21 </td>
</tr>
<tr>

<td class='name'>
A&amp;W Root Beer
</td>
<td> $0.75 </td>
<td class='empty'>
Sold Out
</td>
<td> 83 </td>
</tr>
<tr>

<td class='name'>
Vernor's
</td>
<td> $0.75 </td>
<td>
1
</td>
<td> 59 </td>
</tr>
<tr>

<td class='name'>
500mL Mountain Dew
</td>
<td> $0.75 </td>
<td>
2
</td>
<td> 52 </td>
</tr>
</table>
<h3>Temperature</h3>
<p>The pop is chilling at 1.11&deg;C (34.0&deg;F).</p>
<h3>Twitter</h3>

<script src="http://widgets.twimg.com/j/2/widget.js"></script>
<script type="text/javascript">
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 6,
  interval: 6000,
  width: 325,
  height: 300,
  theme: {
    shell: {
      background: '#3e718a',
      color: '#ffffff'
    },
    tweets: {
      background: '#ffffff',
      color: '#3e718a',
      links: '#8ec1da'
    }
  },
  features: {
    scrollbar: true,
    loop: false,
    live: true,
    hashtags: true,
    timestamp: true,
    avatars: false,
    behavior: 'all'
  }
}).render().setUser('calvin_pop').start();
</script>

<br/><br/>

<p style='text-align: center'>
This page is valid HTML5. </p>

<p style='text-align: center'>
<a href="http://validator.w3.org/check?uri=http%3A%2F%2Fsoda-pop.calvin.edu">
<img src="http://www.w3.org/html/logo/badge/html5-badge-h-graphics.png" width="133" height="64" alt="HTML5 Powered with Graphics, 3D &amp; Effects" title="HTML5 Powered with Graphics, 3D &amp; Effects">
</a>
</td>
<td>

<h3>Information</h3>
<p>I am the Calvin Computer Science department's pop machine. <br/> 
I live in the corner of SB321, the CS lounge. <br/>
You should come visit me some time.</p>

   <h3>Recent Data</h3>
   <div><canvas id="todayChart" width="600" height="300">HTML5 Canvas support necessary to see graphs.</canvas></div>
   <div><canvas id="tempChart" width="600" height="300"></canvas></div>
   <h3>Historical Trends</h3>
   <div><canvas id="doyChart" width="600" height="300"></canvas></div>   
   <br/>
   <div><canvas id="hourChart" width="600" height="300"></canvas></div>
   <br/>
   <div><canvas id="dayChart" width="600" height="300"></canvas></div>
   <br/>
   <div><canvas id="monthChart" width="600" height="300"></canvas></div>

</td></tr></table>
<p class='credits'>Maintainer: Quentin Baker &lt;qrb2&gt;</p>
